<html>

<head>
    <base href="/" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add New Deal - LowonCost</title>
    <link rel="shortcut icon" href="{{url_for('static', filename='icons/icon.webp')}}" type="image/x-icon">
    <link rel="stylesheet" href="{{url_for('static', filename='css/adddeal.css')}}">
</head>

<body>
    
    <nav class="navbar">
        <div class="website-name">DealsHub</div>
    </nav>

    <div class="form-container">
        <h2 class="form-title">Edit Deal</h2>
        <form id="addDealForm" method="POST" action="/profile/addnewdeal">
            <div class="form-group">
                <label for="title">Deal Title</label>
                <input type="text" id="title" name="title" required maxlength="100" value="{{item['title']}}">
            </div>

            <div class="form-group">
                <label for="imageUrl">Image URL</label>
                <input type="url" id="imageUrl" name="imageUrl" placeholder="Enter the URL of the deal image" required maxlength="200" value="{{item['imageUrl']}}">
            </div>
            <div class="form-group">
                <label for="dealUrl">Deals Url</label>
                <input type="url" id="dealUrl" name="dealUrl" placeholder="Enter the URL of the deal" required maxlength="200" value="{{item['dealUrl']}}">
            </div>

            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" name="description" required placeholder="Description of the deal under 500 characters" maxlength="500" value="">{{item['description']}}</textarea>
            </div>

            <div class="form-group">
                <label for="category">Category</label>
                <select id="category" name="category" required>
                    
                    <option value="">Select Category</option>
                    <option value="{{item['category']}}" selected>{{item['category'] | title}}</option>
                    <option value="electronics" {% if item['category'] == "electronics" %}selected{% endif %}>Electronics</option>
                    <option value="fashion" {% if item['category'] == "fashion" %}selected{% endif %}>Fashion</option>
                    <option value="home" {% if item['category'] == "home" %}selected{% endif %}>Home & Garden</option>
                    <option value="sports" {% if item['category'] == "sports" %}selected{% endif %}>Sports</option>
                    <option value="books" {% if item['category'] == "books" %}selected{% endif %}>Books</option>
                    <option value="others" {% if item['category'] == "others" %}selected{% endif %}>Others</option>
                </select>
            </div>

            <!-- <div class="form-group">
                <label>Sub Categories</label>
                <div class="tags-input" id="tagsContainer">
                    Tags will be added here 
                </div>
                <input type="text" id="tagInput" placeholder="Type and press Enter to add tags"
                    style="margin-top: 10px;">
            </div> -->

            <div class="form-group">
                <label for="currentPrice">Current Price</label>
                <input type="number" id="currentPrice" name="currentPrice" step="1" required min="0" max="99999999" value="{{item['currentPrice']}}">
            </div>

            <div class="form-group">
                <label for="originalPrice">Original Price</label>
                <input type="number" id="originalPrice" name="originalPrice" step="1" required min="0" max="99999999" value="{{item['originalPrice']}}">
            </div>

            <div class="button-group">
                <button type="submit" class="btn btn-primary">Confirm Edit</button>
                <button type="button" class="btn btn-secondary" onclick="window.location.href='/'">Cancel</button>
                <button type="button" class="btn btn-third" onclick="window.location.href='/'">Delete This Deal</button>
            </div>
        </form>
    </div>

    <script>
        // Handle tags input
    //     const tagInput = document.getElementById('tagInput');
    //     const tagsContainer = document.getElementById('tagsContainer');
    //     let tags = [];

    //     tagInput.addEventListener('keypress', function (e) {
    //         if (e.key === 'Enter') {
    //             e.preventDefault();
    //             const tag = this.value.trim();
    //             if (tag && !tags.includes(tag)) {
    //                 addTag(tag);
    //                 this.value = '';
    //             }
    //         }
    //     });

    //     function addTag(text) {
    //         tags.push(text);
    //         const tag = document.createElement('span');
    //         tag.className = 'tag';
    //         tag.innerHTML = `
    //             ${text}
    //             <button type="button" onclick="removeTag('${text}')">Ã—</button>
    //         `;
    //         tagsContainer.appendChild(tag);
    //     }

    //     function removeTag(text) {
    //         tags = tags.filter(tag => tag !== text);
    //         renderTags();
    //     }

    //     function renderTags() {
    //         tagsContainer.innerHTML = '';
    //         tags.forEach(addTag);
    //     }

    //     // Handle form submission
    //     document.getElementById('addDealForm').addEventListener('submit', function (e) {
    //         e.preventDefault();

    //         // Here you would normally send the data to a server
    //         // For now, we'll just show an alert and redirect
    //         alert('Deal added successfully!');
    //         window.location.href = '/';
    //     });
     </script>
</body>

</html>